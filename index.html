<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enterprise Data Visualization Dashboard | Premium Analytics Suite</title>
    
    <!-- External Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="style.css">
</head>
<body class="theme-light">
    
    <!-- Theme Toggle & Settings -->
    <div class="floating-controls">
        <button id="themeToggle" class="control-btn" title="Toggle Theme">
            <i class="fas fa-moon"></i>
        </button>
        <button id="colorSchemeBtn" class="control-btn" title="Color Schemes">
            <i class="fas fa-palette"></i>
        </button>
        <button id="settingsBtn" class="control-btn" title="Settings">
            <i class="fas fa-cog"></i>
        </button>
    </div>

<!-- Main Dashboard Container -->
<div class="dashboard-wrapper">
    
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo-container">
                <img src="assets/logo.jpg" alt="DataViz Pro Logo" class="logo-image">
            </div>
            <button class="sidebar-toggle" id="sidebarToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>

        <div class="sidebar-content">

                <!-- Upload Section -->
                <div class="sidebar-section">
                    <button class="btn-primary-custom" id="uploadBtn">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <span>Upload Data</span>
                    </button>
                </div>

                <!-- Quick Stats -->
                <div class="sidebar-section" id="quickStats" style="display: none;">
                    <h3 class="section-title">Dataset Overview</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon"><i class="fas fa-table"></i></div>
                            <div class="stat-info">
                                <span class="stat-value" id="rowCount">0</span>
                                <span class="stat-label">Rows</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon"><i class="fas fa-columns"></i></div>
                            <div class="stat-info">
                                <span class="stat-value" id="colCount">0</span>
                                <span class="stat-label">Columns</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Filters Section -->
                <div class="sidebar-section" id="filtersSection" style="display: none;">
                    <h3 class="section-title">
                        <i class="fas fa-filter"></i> Filters
                    </h3>
                    <div id="filterContainer"></div>
                    <button class="btn-secondary-custom mt-2" id="clearFilters">
                        <i class="fas fa-redo"></i> Reset Filters
                    </button>
                </div>

                <!-- Export Options -->
                <div class="sidebar-section" id="exportSection" style="display: none;">
                    <h3 class="section-title">
                        <i class="fas fa-download"></i> Export
                    </h3>
                    <div class="export-buttons">
                        <button class="btn-export" id="exportPNG">
                            <i class="fas fa-image"></i> Chart as PNG
                        </button>
                        <button class="btn-export" id="exportExcel">
                            <i class="fas fa-file-excel"></i> Data as Excel
                        </button>
                        <button class="btn-export" id="exportPDF">
                            <i class="fas fa-file-pdf"></i> Report as PDF
                        </button>
                        <button class="btn-export" id="printDashboard">
                            <i class="fas fa-print"></i> Print
                        </button>
                    </div>
                </div>

                <!-- Insights Panel -->
                <div class="sidebar-section" id="insightsSection" style="display: none;">
                    <h3 class="section-title">
                        <i class="fas fa-lightbulb"></i> AI Insights
                    </h3>
                    <div id="insightsContainer" class="insights-list"></div>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            
            <!-- Top Header -->
            <header class="content-header">
                <div class="header-left">
                    <h2 id="dashboardTitle">Welcome to DataViz Pro</h2>
                    <p id="dashboardSubtitle">Upload your data to begin advanced analytics</p>
                </div>
                <div class="header-right">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="globalSearch" placeholder="Search data...">
                    </div>
                </div>
            </header>

            <!-- Chart Controls -->
            <div class="controls-panel" id="controlsPanel" style="display: none;">
                <div class="control-group">
                    <label>
                        <i class="fas fa-chart-bar"></i> Chart Type
                    </label>
                    <select id="chartType" class="form-select-custom">
                        <option value="auto">Auto Detect</option>
                        <option value="bar">Bar Chart</option>
                        <option value="line">Line Chart</option>
                        <option value="pie">Pie Chart</option>
                        <option value="histogram">Histogram</option>
                        <option value="scatter">Scatter Plot</option>
                        <option value="area">Area Chart</option>
                        <option value="boxplot">Box Plot</option>
                        <option value="heatmap">Heatmap</option>
                        <option value="bubble">Bubble Chart</option>
                        <option value="treemap">Tree Map</option>
                    </select>
                </div>

                <div class="control-group">
                    <label>
                        <i class="fas fa-layer-group"></i> Sheet
                    </label>
                    <select id="sheetSelect" class="form-select-custom"></select>
                </div>

                <div class="control-group">
                    <label>
                        <i class="fas fa-sort-amount-down"></i> Top N
                    </label>
                    <input type="number" id="topN" class="form-control-custom" value="10" min="1" max="100">
                </div>

                <div class="control-group">
                    <label>
                        <i class="fas fa-paint-brush"></i> Color Scheme
                    </label>
                    <select id="chartColorScheme" class="form-select-custom">
                        <option value="default">Default</option>
                        <option value="corporate">Corporate Blue</option>
                        <option value="sunset">Sunset Orange</option>
                        <option value="forest">Forest Green</option>
                        <option value="royal">Royal Purple</option>
                        <option value="minimal">Minimal Gray</option>
                        <option value="vibrant">Vibrant Mix</option>
                    </select>
                </div>

                <div class="control-group">
                    <button class="btn-refresh" id="refreshChart">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
            </div>

            <!-- Main Visualization Area -->
            <div class="viz-container" id="vizContainer">
                
                <!-- Welcome Screen -->
                <div class="welcome-screen" id="welcomeScreen">
                    <div class="welcome-content animate__animated animate__fadeIn">
                        <div class="welcome-icon">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <h2>Start Your Data Journey</h2>
                        <p>Upload Excel or CSV files to unlock powerful visualizations and insights</p>
                        <button class="btn-large-primary" onclick="document.getElementById('uploadBtn').click()">
                            <i class="fas fa-plus-circle"></i> Upload Your First Dataset
                        </button>
                        <div class="features-grid">
                            <div class="feature-item">
                                <i class="fas fa-chart-pie"></i>
                                <span>10+ Chart Types</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-filter"></i>
                                <span>Dynamic Filtering</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-map-marked-alt"></i>
                                <span>Interactive Maps</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-brain"></i>
                                <span>AI Insights</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Grid -->
                <div class="charts-grid" id="chartsGrid" style="display: none;">
                    <!-- Primary Chart -->
                    <div class="chart-card chart-primary">
                        <div class="chart-header">
                            <h3 id="chartTitle">Data Visualization</h3>
                            <div class="chart-actions">
                                <button class="chart-action-btn" id="fullscreenChart" title="Fullscreen">
                                    <i class="fas fa-expand"></i>
                                </button>
                                <button class="chart-action-btn" id="downloadChart" title="Download">
                                    <i class="fas fa-download"></i>
                                </button>
                            </div>
                        </div>
                        <div class="chart-body">
                            <canvas id="mainChart"></canvas>
                            <div id="heatmapContainer" style="display: none;"></div>
                            <div id="treemapContainer" style="display: none;"></div>
                        </div>
                    </div>

                    <!-- India Map -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3><i class="fas fa-map-marker-alt"></i> Geographic Distribution</h3>
                            <span class="badge-status" id="mapStatus">Ready</span>
                        </div>
                        <div class="chart-body">
                            <div id="indiaMap" style="height: 400px; border-radius: 12px;"></div>
                        </div>
                    </div>
                </div>

                <!-- Data Table Section -->
                <div class="table-section" id="tableSection" style="display: none;">
                    <div class="table-header">
                        <h3><i class="fas fa-table"></i> Data Explorer</h3>
                        <div class="table-controls">
                            <input type="text" id="tableSearch" class="form-control-custom" placeholder="Search in table...">
                            <select id="rowsPerPage" class="form-select-custom">
                                <option value="10">10 rows</option>
                                <option value="25" selected>25 rows</option>
                                <option value="50">50 rows</option>
                                <option value="100">100 rows</option>
                            </select>
                        </div>
                    </div>
                    <div class="table-wrapper">
                        <div id="dataTable"></div>
                    </div>
                    <div class="table-pagination" id="tablePagination"></div>
                </div>
            </div>
        </main>
    </div>

    <!-- Upload Modal -->
    <div class="modal-overlay" id="uploadModal">
        <div class="modal-container animate__animated animate__zoomIn animate__faster">
            <div class="modal-header">
                <h3><i class="fas fa-cloud-upload-alt"></i> Upload Dataset</h3>
                <button class="modal-close" id="closeModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="dropzone" id="dropzone">
                    <div class="dropzone-content">
                        <i class="fas fa-cloud-upload-alt dropzone-icon"></i>
                        <h4>Drag & Drop your files here</h4>
                        <p>or click to browse</p>
                        <input type="file" id="fileInput" accept=".xlsx,.xls,.csv" hidden>
                        <button class="btn-secondary-custom" onclick="document.getElementById('fileInput').click()">
                            <i class="fas fa-folder-open"></i> Browse Files
                        </button>
                        <div class="file-types">
                            <span><i class="fas fa-file-excel"></i> Excel (.xlsx, .xls)</span>
                            <span><i class="fas fa-file-csv"></i> CSV (.csv)</span>
                        </div>
                    </div>
                </div>
                <div id="uploadProgress" class="upload-progress" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <p id="progressText">Processing...</p>
                </div>
                <div id="sheetSelector" class="sheet-selector" style="display: none;">
                    <h4>Select Sheets to Import</h4>
                    <div id="sheetList" class="sheet-list"></div>
                    <button class="btn-primary-custom mt-3" id="loadSelectedSheets">
                        <i class="fas fa-check"></i> Load Selected Sheets
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Color Scheme Modal -->
    <div class="modal-overlay" id="colorSchemeModal">
        <div class="modal-container modal-sm animate__animated animate__fadeIn">
            <div class="modal-header">
                <h3><i class="fas fa-palette"></i> Theme Gallery</h3>
                <button class="modal-close" onclick="closeColorSchemeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="theme-grid">
                    <div class="theme-option" data-theme="corporate">
                        <div class="theme-preview theme-corporate"></div>
                        <span>Corporate Blue</span>
                    </div>
                    <div class="theme-option" data-theme="sunset">
                        <div class="theme-preview theme-sunset"></div>
                        <span>Sunset Orange</span>
                    </div>
                    <div class="theme-option" data-theme="forest">
                        <div class="theme-preview theme-forest"></div>
                        <span>Forest Green</span>
                    </div>
                    <div class="theme-option" data-theme="royal">
                        <div class="theme-preview theme-royal"></div>
                        <span>Royal Purple</span>
                    </div>
                    <div class="theme-option" data-theme="minimal">
                        <div class="theme-preview theme-minimal"></div>
                        <span>Minimal Gray</span>
                    </div>
                    <div class="theme-option" data-theme="vibrant">
                        <div class="theme-preview theme-vibrant"></div>
                        <span>Vibrant Mix</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- External Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-boxplot@4.2.4/build/index.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-treemap@2.3.0/dist/chartjs-chart-treemap.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-matrix@2.0.1/dist/chartjs-chart-matrix.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <!-- Register Chart.js Plugins -->
    <script>
        // Register Chart.js plugins for advanced chart types
        if (typeof Chart !== 'undefined') {
            // Register all available Chart.js controllers and elements from plugins
            
            // BoxPlot plugin - register all components
            if (typeof ChartBoxPlot !== 'undefined' && ChartBoxPlot.registerables) {
                Chart.register(...ChartBoxPlot.registerables);
            }
            
            // TreeMap plugin
            if (typeof ChartTreemap !== 'undefined') {
                Chart.register(ChartTreemap.TreemapController, ChartTreemap.TreemapElement);
            }
            
            // Matrix plugin for heatmaps
            if (typeof ChartMatrix !== 'undefined') {
                Chart.register(ChartMatrix.MatrixController, ChartMatrix.MatrixElement);
            }
            
            console.log('âœ… Chart.js plugins registered successfully');
        }
    </script>
    
    <!-- Custom Script -->
    <script src="script.js"></script>
</body>
</html>
